# BugList & ChangeLog

## Version 1.1.0

BugList 2019年06月24日

### Bug:

1. (解决) [严重x3] 出现第一次买卖完, 平仓后, 再进行开仓直接崩溃 或者直接 卖出平掉 - 原因找到: 从远程和本地缓存获取数据, 本地缓存覆盖了远程数据, 造成服务挂起时, 手动撤单后重启服务, 触发撤单失败.
2. [一般] 出现平仓多次的问题 - 发送平仓请求还没返回结果, 新一轮检查又要求平仓 - 原因: 检测频率高于 okex 服务器响应速度
3. [严重x3] 担心的问题: 会不会以平仓价下单后, 在暴涨暴跌行情下仍然无法成交???????? - 是否增加市价全平接口??
4. (解决) [紧急] 没有暴涨暴跌的时候, 有时候按平仓价也平不掉 - 原因: 目前滑点太低 0.0005, 先改成 0.005 再测
5. UI 界面信息不同步

### 需求:

1. 止损价移动方案

> 1. 现在是根据 movePrice 与上/下轨的比较大小, 判断是否移仓价
> 2. 以实时价格计算上/下轨, 不与 movePrice 比较, 直接更新 triggerPrice
> 3. 以实时价格不计算上下轨, 直接与 movePrice 比较, 更新 triggerPrice
> 4. 移仓价以分钟收盘价计算, 平仓价实时计算
> 5. 移仓价: 赚 10%的时候, 移到赚 2%; 赚 30%的时候移到 3%, ..  赚 100%的时候移到 90%, 赚 200%的时候移到 180% ..
     目的是开始移动的少, 为了防止回撤, 接近 100% 的时候主键开始移动多, 稳住收益; 超过 100% 又移动的少... 这个策略不容易实现.
     主要思路就是一分钟拉锯比较大时候, 一不小心就平仓了.

2. 界面操作: 增加实时价格, 买卖通过 js 实现, 买卖后的结果查看(是否下单成功), 当前仓位实时同步
3. 程序出买卖信号(取代随机买卖方向)



## Version 1.0.2

BugList 2019年06月21日

### 需求

1. (完成) 网络抖动 - 监听断开后, 退出使用 pm2 自动重启 >> 必须搭配完备的数据落地, 以及使用官方的止盈止损单(防止程序出问题) - 官方无止盈止损单接口.
2. (完成) 程序崩溃后的数据恢复
3. (完成) 开仓, 平仓(是否自己手动平, 还是创建系统止盈止损点 - 系统无止盈止损接口, 必须实时价格监控, 手动平仓)
4. (完成) 加仓/平仓后, 使用接口再开仓失败
5. (完成) 增加全面的日志
6. TODO 止损价移动方案

> 1. 现在是根据 movePrice 与上/下轨的比较大小, 判断是否移仓价
> 2. 以实时价格计算上/下轨, 不与 movePrice 比较, 直接更新 triggerPrice
> 3. 以实时价格不计算上下轨, 直接与 movePrice 比较, 更新 triggerPrice
> 4. 移仓价以分钟收盘价计算, 平仓价实时计算
> 5. 移仓价: 赚 10%的时候, 移到赚 2%; 赚 30%的时候移到 3%, ..  赚 100%的时候移到 90%, 赚 200%的时候移到 180% ..
     目的是开始移动的少, 为了防止回撤, 接近 100% 的时候主键开始移动多, 稳住收益; 超过 100% 又移动的少... 这个策略不容易实现.
     主要思路就是一分钟拉锯比较大时候, 一不小心就平仓了.

7. (完成) 界面操作
8. TODO 程序出买卖信号(取代随机买卖方向)
9. 担心的问题: 会不会以平仓价下单后, 在暴涨暴跌行情下仍然无法成交????????
